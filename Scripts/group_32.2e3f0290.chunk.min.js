"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[8488],{58793:function(e,t,n){n.r(t),n.d(t,{PageTransitionsCompletedSymbol:function(){return a.TR},PageTransitionsSymbol:function(){return a.M$},editor:function(){return v},editorPage:function(){return k},page:function(){return M}});var o=n(56510),i=n(25259),r=n(21980),a=n(67613),s=n(80928);const d=(0,o.ff)([(0,o.t6)(i.$e,a.u2),(0,o.t6)(i.Wf,a.u2),a.TR,s.i,r.ZQ],((e,t,n,o,i)=>{const r=!!i&&"startViewTransition"in i.document&&e.shouldUseViewTransition;return{name:"pageTransitions",pageDidMount(o){const i=t.get(),r=i?.mountDoneHandler;r&&r({transitionName:e.transitionName,pageId:o}),(i?.isFirstMount??1)&&n.notifyPageTransitionsCompleted(o),t.update((e=>({...e,isFirstMount:!1})))},pageWillUnmount({contextId:e}){const a=t.get();if(r){const e=()=>{o.getScrollYHistoryState()||o.scrollToTop()},r=e=>{n.notifyPageTransitionsCompleted(e),o.getScrollYHistoryState()&&o.restoreScrollPosition()};!function(e,t,n,o){let i,r;t.document.documentElement.dataset.viewTransition="page-transition";const a=document.startViewTransition((()=>e.then((e=>{r=e.transitionName,i=e.pageId,t.document.documentElement.dataset.pageTransition=r}))));a.ready.then(n),a.finished.then((()=>{delete t.document.documentElement.dataset.viewTransition,o(i)}))}(new Promise((e=>{t.update((t=>({...t,mountDoneHandler:e})))})),i,e,r)}a?.propsUpdateListenersUnsubscribers?.[e]?.(),t.update((t=>{const n=t?.propsUpdateListenersUnsubscribers??{};return delete n[e],{...t,propsUpdateListenersUnsubscribers:n}}))}}})),u=(0,o.ff)([(0,o.t6)(i.Wf,a.u2)],(e=>({disableNextTransition:()=>e.update((e=>({...e,nextTransitionEnabled:!1})))}))),l=(0,o.ff)([],(()=>{let e=[];return{onPageTransitionsCompleted:t=>{e.push(t)},notifyPageTransitionsCompleted:t=>{e.forEach((e=>e(t))),e=[]}}}));var p=n(13487),c=n(27451),g=n(55437);const m=(0,o.ff)([(0,o.t6)(i.$e,a.u2),g.xP,a.TR,s.i,(0,o.t6)(i.Wf,a.u2),r.ZQ],((e,t,n,o,i,r)=>({componentTypes:["Page"],componentWillMount(a){const s=i.get(),d=!s||s.nextTransitionEnabled,u=!s||s.isFirstMount,l=!!r&&"startViewTransition"in r.document&&e.shouldUseViewTransition,p=a.id;t.update({SITE_PAGES:{transitionEnabled:d,...l?{}:{onTransitionStarting:()=>{o.getScrollYHistoryState()||o.scrollToTop()},onTransitionComplete:()=>{n.notifyPageTransitionsCompleted(p),o.getScrollYHistoryState()&&o.restoreScrollPosition()}}}}),i.update((()=>({...s,isFirstMount:u,nextTransitionEnabled:!0})))}})));var f=n(18325),T=n(18037),y=n.n(T);const b=["video.videoInfo.videoId","image.uri","image.link.href","image.displayMode","backgroundImage.uri","backgroundImage.link.href","backgroundImage.displayMode"],P=["type","alignType","fittingType","scrollType","colorOverlay","colorOverlayOpacity","color","opacity"],U=(e,t,n,o)=>o.every((n=>(e&&e[n])===(t&&t[n])))&&n.every((i=>!e&&!t||U(e&&e[i],t&&t[i],n,o))),x=(0,o.ff)([(0,o.t6)(i.$e,a.u2),g.xP,a.TR,s.i,(0,o.t6)(i.Wf,a.u2),f.C9,f.ku],((e,t,n,o,i,r,a)=>{const s=`pageBackground_${r}`,d=t.subscribeToChanges((n=>{if(s in n){const a=n[s]?.fillLayers,d=i.get().pageBackgroundProp,u=e.pageBackground,l=i.get().pageBackground,p=i.get()?.nextTransitionEnabled??!0,c=!((e,t)=>{if(!t||!e)return!1;const n=t.mediaRef,o=n&&n.type,i=e.mediaRef,r=i&&i.type,a=!n&&!i,s=a||o===r;let d=[...P];if("WixVideo"===o&&s){const e=d.indexOf("color");d.splice(e,1)}else a&&(d=["color"]);return s&&U(t,e,["mediaRef","imageOverlay"],d)})(u,l),g=(o=a,!((r=d)&&o&&b.every((e=>y().get(r,e)===y().get(o,e))))||c);i.update((e=>({...e,pageBackgroundProp:a,pageBackground:u}))),t.update({BACKGROUND_GROUP:{transitionEnabled:p&&g}})}var o,r}));return i.update((e=>{const t=e?.propsUpdateListenersUnsubscribers??{};return t[a]=d,{...e||{},propsUpdateListenersUnsubscribers:t}})),{componentTypes:["PageBackground"],componentWillMount(){const e=i.get(),t=e?.isFirstMount??!0;i.update((()=>({...e,isFirstMount:t})))}}})),M=e=>{e(a.TR).to(l),e(a.M$).to(u),e(p.j.PageDidMountHandler,p.j.PageWillUnmountHandler).to(d),e(c.Vx).to(m),e(c.Vx).to(x)},k=e=>{e(p.j.PageDidMountHandler,p.j.PageWillUnmountHandler).to(d),e(c.Vx).to(m),e(c.Vx).to(x)},v=e=>{e(a.M$).to(u),e(a.TR).to(l)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_32.2e3f0290.chunk.min.js.map