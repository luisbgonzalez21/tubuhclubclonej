"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[4522,7212],{74880:function(e,t,r){var n,i,a,s,o,u,c,l,d;r.d(t,{KG:function(){return u},Yk:function(){return l},iY:function(){return n}}),function(e){e.UNDEFINED="UNDEFINED",e.PUBLIC="PUBLIC",e.PRIVATE="PRIVATE"}(n||(n={})),function(e){e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.WORK="WORK"}(i||(i={})),function(e){e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.MOBILE="MOBILE",e.WORK="WORK",e.FAX="FAX"}(a||(a={})),function(e){e.UNTAGGED="UNTAGGED",e.HOME="HOME",e.WORK="WORK",e.BILLING="BILLING",e.SHIPPING="SHIPPING"}(s||(s={})),function(e){e.UNKNOWN_STATUS="UNKNOWN_STATUS",e.PENDING="PENDING",e.ACTIVE="ACTIVE",e.DELETED="DELETED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE"}(o||(o={})),function(e){e.UNKNOWN_REASON="UNKNOWN_REASON",e.PENDING_ADMIN_APPROVAL_REQUIRED="PENDING_ADMIN_APPROVAL_REQUIRED",e.PENDING_EMAIL_VERIFICATION_REQUIRED="PENDING_EMAIL_VERIFICATION_REQUIRED"}(u||(u={})),function(e){e.DONE="DONE",e.REQUIRE_OWNER_APPROVAL="REQUIRE_OWNER_APPROVAL",e.STATUS_CHECK="STATUS_CHECK"}(c||(c={})),function(e){e.UNKNOWN_STATE="UNKNOWN_STATE",e.SUCCESS="SUCCESS",e.REQUIRE_OWNER_APPROVAL="REQUIRE_OWNER_APPROVAL",e.REQUIRE_EMAIL_VERIFICATION="REQUIRE_EMAIL_VERIFICATION",e.STATUS_CHECK="STATUS_CHECK"}(l||(l={})),function(e){e.UNKNOWN_TENANT_TYPE="UNKNOWN_TENANT_TYPE",e.ACCOUNT="ACCOUNT",e.SITE="SITE",e.ROOT="ROOT"}(d||(d={}))},13039:function(e,t,r){r.d(t,{AC:function(){return w},AO:function(){return _},B_:function(){return V},CY:function(){return B},IO:function(){return g},Ky:function(){return c},OP:function(){return T},Qn:function(){return N},T2:function(){return d},Xh:function(){return m},Y2:function(){return p},_v:function(){return E},aB:function(){return W},eL:function(){return b},fJ:function(){return A},gb:function(){return y},kS:function(){return M},kY:function(){return C},nA:function(){return k},t1:function(){return D},yL:function(){return v},yQ:function(){return f},zg:function(){return I}});var n=r(6504),i=r(18037),a=r.n(i),s=r(61885),o=r(77862),u=r(74880);const c=e=>({id:e.id,contactId:e.contactId,emailVerified:e.attributes?.emailVerified,role:e.memberRole,owner:e.owner,loginEmail:e.email,memberName:e.name??e.attributes?.name??"",firstName:e.attributes?.firstName,lastName:e.attributes?.lastName,imageUrl:e.attributes?.imageUrl??"",nickname:e.attributes?.nickname,profilePrivacyStatus:e.attributes?.privacyStatus,slug:e.slug,status:e.status,creationDate:e.dateCreated,lastUpdateDate:e.dateUpdated,emails:[],phones:[],addresses:[],labels:[],groups:[],customFields:[],revision:""}),l=e=>"ACTIVE"===e.name?"ACTIVE":"PENDING"===e.name&&e.reasons?.includes(u.KG.PENDING_ADMIN_APPROVAL_REQUIRED)?"APPLICANT":"PENDING",d=e=>{const{identity:t,additionalData:r}=e,{identityProfile:n}=t;return{id:t.id,contactId:r?.contactId?.strValue,emailVerified:!!r?.emailVerified?.numValue,role:r?.role?.strValue,owner:!!r?.isOwner?.numValue,loginEmail:t.identifiers[0].email,memberName:n.nickname,firstName:n?.firstName,lastName:n?.lastName,imageUrl:n?.imageUrl,nickname:n?.nickname,profilePrivacyStatus:n?.privacyStatus,slug:r?.slug?.strValue,status:l(t.status),creationDate:t.createdDate,lastUpdateDate:t.updatedDate,emails:[],phones:[],addresses:[],labels:[],groups:[],customFields:[],revision:t.revision}},E=e=>new Promise((t=>setTimeout(t,e))),N=(e,t,r)=>(n,i={})=>{const a={...t.headers,...i.body?{"Content-Type":"application/x-www-form-urlencoded"}:{},...i.headers,"x-wix-client-artifact-id":"thunderbolt"},s={...i,headers:a},o=new URL(n,r).href;return e.envFetch(o,{...t,...s}).then((async e=>{const t=await e.json();if(!e.ok)throw t;if(t.errorCode)throw t.errorCode;return t}))},m=(e,t)=>{try{return e()}catch(e){return t()}},I=e=>e?.details?.errorcode??e?.details?.errorCode??e?.details?.applicationError?.code??e,p=e=>{if(e===n.$9.CANCELED)return!0;const t=I(e);return n.sr.includes(t)},A=e=>{if(e===n.$9.CANCELED)return!0;const t=I(e);return n.QV.includes(t)},f=e=>{const t=I(e);return n.Fs.includes(t)},O=e=>I(e)===n.O1.UNIMPLEMENTED_FEATURE,h=e=>{const t=e?.getBsi();return t?t.split("|")[0]:"00000000-0000-0000-0000-000000000000"},T=e=>e.getVisitorId()??"00000000-0000-0000-0000-000000000000",g=({config:e,viewerModel:t,sessionManager:r,bsiManager:n,handleOauthToken:i,handleSocialLoginResponse:a,isSocialAuthSupported:o,captcha:u,userLanguage:c,reportBi:l,reportSocialAuthStarted:d,useNewSocialFlow:E,translations:N})=>{const m={bsi:"00000000-0000-0000-0000-000000000000",biVisitorId:"00000000-0000-0000-0000-000000000000",svSession:r.getUserSession(),smCollectionId:e.smcollectionId,metaSiteId:t.site.metaSiteId,isSocialAuthSupported:o,getHostReadyPayload:()=>({visitorId:T(r),svSession:r.getUserSession(),bsi:h(n)}),openCaptcha:(0,s.yT)({captcha:u,userLanguage:c}),reportBi:l,reportSocialAuthStarted:d,useNewSocialFlow:E,translations:N};return i&&a&&(m.onTokenMessage=(e,t,r=!1)=>i(e,t,"socialAuthComponent",r?"PUBLIC":"PRIVATE"),m.onBackendSocialLogin=a),m},R={id:{},firstName:{},lastName:{},picture:{},emails:{},addresses:{},phones:{},labels:{}},S={emailVerified:{},role:{},loginEmail:{},nickname:{},slug:{},language:{},status:{},creationDate:{},lastUpdateDate:{},lastLoginDate:{},profilePrivacyStatus:{}},U=e=>a().isDate(e)?"dateValue":Number.isInteger(e)?"numValue":"strValue",D=e=>Object.entries(e).reduce(((e,[t,r])=>{const n=S[t];return R[t]?e[t]=r:!n&&t&&e.customFields.push({name:t,[U(r)]:r}),e}),{customFields:[]}),_=e=>Object.entries(e).reduce(((e,[t,r])=>{const n=S[t];return R[t]?e[t]=r:!n&&t&&e.customFields.push({name:t,value:{[U(r)]:r}}),e}),{customFields:[]}),C=(e,t)=>{const r={loadScript(t,r){return e?.grecaptcha?e.grecaptcha:(0,o.l5)(((e,t)=>`https://www.google.com/recaptcha/enterprise.js?render=${t}&hl=${e}`)(t,r))},showCaptchaBadge(){setTimeout((()=>{t.setItemCssOverrides({visibility:{value:"visible"},"z-index":{value:"var(--portals-z-index)"}},".grecaptcha-badge",e)}),1e3)},hideCaptchaBadge(){t.setItemCssOverrides({visibility:{value:"hidden"}},".grecaptcha-badge",e)},setCaptchaBadgeVisibility(e){if(e)return r.showCaptchaBadge();r.hideCaptchaBadge()}};return r},P="SUSPECTED_BOTS_ONLY",L="ALWAYS",V=e=>({invisible:{login:e?.loginRecaptchaOption===P,signup:e?.signupRecaptchaOption===P},visible:{login:e?.loginRecaptchaOption===L,signup:e?.signupRecaptchaOption===L}}),b=e=>t=>{try{return e?.grecaptcha?.enterprise?.execute(n.mz,{action:t})}catch(e){return}},w=e=>a().mapValues(e?.mapValue?.value??[],"strValue"),v=e=>{if(e.additionalData){return{member:d(e),token:e.sessionToken,pages:w(e.additionalData?.protectedPages),status:e.state.status}}{let t,r;e.smSession&&(r=e.smSession.siteMemberDto,t=e.smSession.sessionToken),r=e.siteMemberDto;return{member:c(r),token:t}}};async function y(e,t,r){if(e)try{return await t()}catch(e){if(O(e))return r();throw e}return r()}const M=(e,t,r)=>{try{const n=G(t,r);if(!n||!n.href)return;e?.location.replace(n.href)}catch{return}},G=(e,t)=>{try{const r=K(e,F.AUTHORIZATION);return t.sessionToken&&r.searchParams.set("sessionToken",t.sessionToken),t.error&&r.searchParams.set("error",t.error),new URL(r)}catch(e){return void console.log("Failed to parse redirect url: ",e)}},k={INVALID_REQUEST:"invalid_request",ACCESS_DENIED:"access_denied",TEMPORARILY_UNAVAILABLE:"temporarily_unavailable"},F={AUTHORIZATION:"authorization_url"},K=(e,t)=>{const r=new URL(e),n=r.searchParams.get(t);if(!n)throw new Error("Authorization redirect url missing");const i=new URL(n);if(i.hostname!==r.hostname)throw new Error("Authorization redirect url not allowed");return i},B=(e,t)=>{try{if(!K(e,F.AUTHORIZATION))return;t?.history.back()}catch{return}},W=e=>{const{identity:t,additionalData:r}=e,{identityProfile:n,metadata:i}=t,a=i?.tags?.some((e=>"owner"===e));return{id:t.id,contactId:r?.contactId?.strValue,emailVerified:t?.email?.isVerified??!!r?.emailVerified?.numValue,role:r?.role?.strValue,owner:a??!1,loginEmail:(t?.identifiers&&t?.identifiers[0]?.email)??t?.email?.address??"",memberName:n?.nickname??"",firstName:n?.firstName??"",lastName:n?.lastName??"",imageUrl:n?.picture??"",nickname:n?.nickname??"",profilePrivacyStatus:n?.privacyStatus??"",slug:r?.slug?.strValue,status:l(t?.status),creationDate:t?.createdDate?.toString()??"",lastUpdateDate:t?.updatedDate?.toString()??"",emails:n?.emails??[],phones:n?.phones??[],addresses:[],labels:n?.labels??[],groups:[],customFields:n?.customFields??[],revision:t?.revision??""}}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/siteMembers.7b8b1967.chunk.min.js.map